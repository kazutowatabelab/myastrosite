---
import Layout from '../../../layouts/BlogPostLayout.astro';
import { getBlogs } from '../../../lib/microcms';

export async function getStaticPaths() {
  const response = await getBlogs();
  return response.flatMap((content) => [
    { params: { lang: 'jp', slug: content.id }, props: { content, lang: 'jp' } },
    { params: { lang: 'en', slug: content.id }, props: { content, lang: 'en' } },
  ]);
}

const { content, lang } = Astro.props;
const isEn = lang === 'en';
const displayContent = isEn ? content.content_en : content.content;
---

<Layout content={content} lang={lang}>
  <div set:html={displayContent} />
</Layout>