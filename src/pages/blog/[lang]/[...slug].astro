---
import Layout from '../../../layouts/BlogPostLayout.astro';
import { getBlogs, getBlogDetail } from '../../../lib/microcms';

export async function getStaticPaths() {
  const response = await getBlogs();
  return response.flatMap((content) => [
    { params: { lang: 'jp', slug: content.id }, props: { content, lang: 'jp' } },
    { params: { lang: 'en', slug: content.id }, props: { content, lang: 'en' } },
  ]);
}

const { content, lang } = Astro.props;
const isEn = lang === 'en';

// データの優先順位：英語モードなら英語、なければ日本語
const displayTitle = (isEn && content.title_en) ? content.title_en : content.title;
const displayContent = (isEn && content.content_en) ? content.content_en : content.content;
---

<Layout title={displayTitle} {...content}>
  <article>
    <h1>{displayTitle}</h1>
    <div set:html={displayContent} />
  </article>
</Layout>
