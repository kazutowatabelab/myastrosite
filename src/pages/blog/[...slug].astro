---
import { getBlogs, type Blog } from '../../lib/microcms';
import BlogPostLayout from '../../layouts/BlogPostLayout.astro';

export async function getStaticPaths() {
	const posts = await getBlogs();
	return posts.map((post) => ({
		params: { slug: post.id },
		props: { post },
	}));
}

interface Props {
	post: Blog;
}

const { post } = Astro.props;

if (!post) {
	return Astro.redirect('/404');
}
---

<BlogPostLayout title={post.title} pubDate={post.publishedAt}>
	<div set:html={post.content} />
</BlogPostLayout>